# 里程碑3联调验收记录（2026-02-21）

## 1. 执行范围
- mini 端稳定化接口校验回归
- 新增订阅列表接口联调
- 小程序个人中心“我的订阅”数据链路验证
- 统计接口回归验证

## 2. 执行命令

1. 后端编译与安装（确保最新 campusqa 代码被 system-start 使用）
- `mvn -pl :jeecg-system-biz -am -DskipTests install`

2. 里程碑3一键联调
- `powershell -ExecutionPolicy Bypass -File report/m3_integration.ps1`

## 3. 联调结果摘要

本次脚本输出（见 `report/m3-api-results.json`）：
- `login.success = true`
- `miniAsk.success = true`
- `subscribe.listSuccess = true`
- `subscribe.listCount = 1`
- `validation.feedbackShouldFail = true`（空反馈被正确拦截）
- `validation.historyShouldFail = true`（空历史请求被正确拦截）
- `stats.overviewSuccess = true`
- `stats.topQuestionsSuccess = true`
- `stats.intentStatsSuccess = true`

## 4. 关键验收点

1. 新增接口可用
- `GET /campusqa/mini/subscribe/list` 正常返回 200 + 列表结果

2. 参数校验生效
- `POST /campusqa/mini/feedback` 传空内容，返回失败（message: `feedback content required`）
- `POST /campusqa/mini/history` 缺少 query/knowledgeId，返回失败（message: `query or knowledgeId required`）

3. 统计回归正常
- `GET /campusqa/stats/overview` 200
- `GET /campusqa/stats/topQuestions` 200
- `GET /campusqa/stats/intentStats` 200

## 5. 产物文件
- 联调脚本：`report/m3_integration.ps1`
- 联调结果：`report/m3-api-results.json`
- 后端日志：`report/backend-start-m3.log`
- 后端错误日志：`report/backend-start-m3.err.log`

## 6. 截图清单（答辩可直接用）
1. `m3_integration.ps1` 执行成功终端输出（含 `M3_API_SUMMARY`）
2. `m3-api-results.json` 内容截图
3. `/campusqa/mini/subscribe/list` 返回结果截图
4. 参数校验失败返回截图（feedback 空内容、history 空请求）
5. 小程序“个人中心-我的订阅”页面截图
6. 统计三接口返回截图（overview/topQuestions/intentStats）

## 7. 验收结论
- 里程碑3联调：**通过**
- 当前阶段可进入“答辩材料封装与演示排练”。
